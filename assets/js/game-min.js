(()=>{"use strict";let e=[],a=["C","D","H","S"],t=["A","J","Q","K"],r=[],l=document.querySelectorAll(".cardsDiv"),d=document.querySelector("#getCard"),s=document.querySelector("#stopGame"),n=document.querySelector("#newGame"),i=document.querySelectorAll("small"),o=()=>{let e=[];for(let r=2;r<=10;r++)for(let l of a)e.push(r+l);for(let d of a)for(let s of t)e.push(s+d);return _.shuffle(e)},c=(a=2)=>{e=o(),r=[];for(let t=0;t<a;t++)r.push(0);i.forEach(e=>e.innerHTML=0),l.forEach(e=>e.innerHTML=""),d.disabled=!1,s.disabled=!1},$=()=>{if(0===e.length)throw"No hay cartas en el deck";return e.pop()},u=e=>{let a=e.substring(0,e.length-1);return isNaN(a)?"A"===a?11:10:1*a},f=(e,a)=>(r[a]=r[a]+u(e),i[a].innerText=r[a],r[a]),g=(e,a)=>{let t=document.createElement("img");t.src=`assets/cartas/${e}.png`,t.classList.add("carta"),l[a].append(t)},h=()=>{let[e,a]=r;setTimeout(()=>{a===e?alert("Nadie gana :("):e>21?alert("La computadora gana"):a>21?alert("Jugador gana!"):alert("La computadora gana")},10)},p=e=>{let a=0;do{let t=$();a=f(t,r.length-1),g(t,r.length-1)}while(a<e&&e<=21&&e<=21);h()};d.addEventListener("click",()=>{let e=$(),a=f(e,0);g(e,0),a>21?(console.warn("Lo siento ya perdiste"),d.disabled=!0,s.disabled=!0,p(a)):21===a&&(console.warn("Ganaste!"),d.disabled=!0,s.disabled=!0,p(a))}),s.addEventListener("click",()=>{s.disabled=!0,d.disabled=!0,p(r[0])}),n.addEventListener("click",()=>{c()})})();